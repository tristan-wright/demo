#include "b.h"

bool others_later(Board* board, int curStop);
void first_open(Board* board, int curStop);

void play_move(Game* game, Player* player) {
    int curStop = player_pos(game->board, player);

    // #1 case in user move choice.
    if (others_later(game->board, curStop)) {
        return;
    }


    // #4 case in user move choice.
    first_open(game->board, curStop);
    return;
}

bool others_later(Board* board, int curStop) {

    for (int i = 0; i < board->numStops; ++i) {
        Stop* stop = &board->stops[i];
        if (stop->cap > 0 && i < curStop) {
            return false;
        }
    }

    if (at_capacity(&board->stops[curStop + 1])) {
        return false;
    }

    chosen_move(curStop + 1, stdout);
    return true;
}

void first_open(Board* board, int curStop) {
    for (int i = curStop + 1; i < board->numStops; ++i) {
        Stop* stop = &board->stops[i];
        if (!at_capacity(stop)) {
            chosen_move(i, stdout);
            return;
        }
    }
}